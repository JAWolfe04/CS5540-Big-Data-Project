package TweetCompiler;

import twitter4j.RawStreamListener;
import twitter4j.TwitterException;
import twitter4j.TwitterStream;
import twitter4j.TwitterStreamFactory;
import TweetCompiler.TweetFile;

public class TweetCompiler {
	private static StringBuilder tweets = new StringBuilder("");
	private static int tweetCount = 0;
	private static int totalTweets = 0;

	public static void main(String[] args) throws TwitterException {		
		TwitterStream twitterStream = new TwitterStreamFactory().getInstance().addListener(new RawStreamListener() {
            @Override
            public void onMessage(String rawJSON) {
            	tweets.append(rawJSON + "\n");
            	++tweetCount;
            	if(tweetCount == 100)
            	{
            		TweetFile.saveTweets(tweets.toString());
            		tweets.setLength(0);
            		tweetCount = 0;
            		totalTweets += 100;
            		System.out.println(totalTweets + " Tweets");
            	}
            }

            @Override
            public void onException(Exception ex) {
                ex.printStackTrace();
            }
        }).sample();
	}

}
